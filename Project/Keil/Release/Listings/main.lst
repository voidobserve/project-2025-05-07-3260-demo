C51 COMPILER V9.60.7.0   MAIN                                                              06/23/2025 11:05:11 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Release\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\User\main.c OPTIMIZE(8,SPEED) BROWSE INTVECTOR(0X000C) INCDIR(..\.
                    -.\Libraries\Include;..\..\User;..\..\Hardware) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Release\Listings\main.lst) OBJECT(
                    -.\Release\Objects\main.obj)

line level    source

   1          /**
   2           ******************************************************************************
   3           * @file    main.c
   4           * @author  HUGE-IC Application Team
   5           * @version V1.0.0
   6           * @date    01-05-2021
   7           * @brief   Main program body
   8           ******************************************************************************
   9           * @attention
  10           *
  11           * <h2><center>&copy; COPYRIGHT 2021 HUGE-IC</center></h2>
  12           *
  13           * 版权说明后续补上
  14           *
  15           ******************************************************************************
  16           */
  17          
  18          /* Includes ------------------------------------------------------------------*/
  19          #include "include.h"
  20          #include <stdio.h>
  21          
  22          #include "user_config.h"
  23           
  24          
  25          /**
  26           * @brief  Main program.
  27           * @param  None
  28           * @retval None
  29           */
  30          void main(void)
  31          {
  32   1          // 看门狗默认打开, 复位时间2s
  33   1          WDT_KEY = WDT_KEY_VAL(0xDD); //  关闭看门狗 (如需配置看门狗请查看“WDT\WDT_Reset”示例)
  34   1      
  35   1          system_init();
  36   1      
  37   1          // 关闭HCK和HDA的调试功能
  38   1          WDT_KEY = 0x55;  // 解除写保护
  39   1          IO_MAP &= ~0x01; // 清除这个寄存器的值，实现关闭HCK和HDA引脚的调试功能（解除映射）
  40   1          WDT_KEY = 0xBB;  // 写一个无效的数据，触发写保护
  41   1      
  42   1          uart0_config();
  43   1          // timer0_config();
  44   1          timer1_pwm_config();
  45   1          timer1_pwm_disable(); 
  46   1      
  47   1          // timer1_set_pwm_high_feq();
  48   1      
  49   1          adc_config();
  50   1      
  51   1          printf("sys reset\n");
  52   1      
  53   1          // adc_sel_pin(ADC_PIN_DETECT_CHARGE); // 测试通过，可以正常检测对应的电压值
C51 COMPILER V9.60.7.0   MAIN                                                              06/23/2025 11:05:11 PAGE 2   

  54   1          // adc_sel_pin(ADC_PIN_DETECT_BATTERY); // 测试通过，可以正常检测对应的电压值
  55   1      
  56   1          // PWM_CTL_FOR_CHARGING_SET_HIGH_FEQ();
  57   1          PWM_CTL_FOR_CHARGING_SET_LOW_FEQ();
  58   1      
  59   1          // {
  60   1          //     u32 tmp = (u32)TIMER1_HIGH_FEQ_PEROID_VAL * 90 / 100;
  61   1      
  62   1          //     TMR1_PWMH = (tmp >> 8) & 0xFF;
  63   1          //     TMR1_PWML = tmp & 0xFF;
  64   1          // }
  65   1      
  66   1          while (1)
  67   1          {
  68   2              // charge_handle();
  69   2          }
  70   1      }
  71          
  72          /**
  73           * @}
  74           */
  75          
  76          /*************************** (C) COPYRIGHT 2022 HUGE-IC ***** END OF FILE *****/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     45    ----
   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
